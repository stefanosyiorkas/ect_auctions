{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import\"./Register.css\";// reuse styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuctionDetails=()=>{const{id}=useParams();const[auction,setAuction]=useState(null);const[bidAmount,setBidAmount]=useState(\"\");const[message,setMessage]=useState(\"\");const[bids,setBids]=useState([]);const fetchAuction=async()=>{try{const res=await axios.get(\"http://localhost:8080/api/auctions\");const found=res.data.find(item=>item.id.toString()===id);setAuction(found);}catch(_unused){setMessage(\"Failed to load auction\");}};const fetchBids=async()=>{try{const res=await axios.get(\"http://localhost:8080/api/bids/auction/\".concat(id));setBids(res.data);}catch(_unused2){setBids([]);}};useEffect(()=>{fetchAuction();fetchBids();},[id]);const handleBid=async e=>{e.preventDefault();const user=JSON.parse(localStorage.getItem(\"user\"));const payload={amount:parseFloat(bidAmount),auction:{id:auction.id},bidder:{id:user.id}};try{await axios.post(\"http://localhost:8080/api/bids\",payload);setMessage(\"‚úÖ Bid placed successfully!\");setBidAmount(\"\");fetchAuction();// update price\nfetchBids();// update bid list\n}catch(err){var _err$response;setMessage(\"‚ùå \"+(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||\"Failed to submit bid\"));}};if(!auction)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading auction...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:auction.name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description:\"}),\" \",auction.description]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",auction.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Current Price:\"}),\" $\",auction.currentPrice]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ends:\"}),\" \",new Date(auction.endTime).toLocaleString()]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleBid,children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Your bid\",value:bidAmount,onChange:e=>setBidAmount(e.target.value),required:true,step:\"0.01\",min:auction.currentPrice+0.01}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Bid\"})]}),message&&/*#__PURE__*/_jsx(\"p\",{children:message}),bids.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Bid History\"}),/*#__PURE__*/_jsx(\"ul\",{children:bids.map(bid=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\uD83D\\uDCB0 $\",bid.amount.toFixed(2),\" \\u2013 \",/*#__PURE__*/_jsx(\"strong\",{children:bid.bidder.username}),/*#__PURE__*/_jsx(\"br\",{}),\"\\uD83D\\uDD52 \",new Date(bid.bidTime).toLocaleString()]},bid.id))})]})]});};export default AuctionDetails;","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","jsx","_jsx","jsxs","_jsxs","AuctionDetails","id","auction","setAuction","bidAmount","setBidAmount","message","setMessage","bids","setBids","fetchAuction","res","get","found","data","find","item","toString","_unused","fetchBids","concat","_unused2","handleBid","e","preventDefault","user","JSON","parse","localStorage","getItem","payload","amount","parseFloat","bidder","post","err","_err$response","response","children","className","name","description","category","currentPrice","Date","endTime","toLocaleString","onSubmit","type","placeholder","value","onChange","target","required","step","min","length","style","marginTop","map","bid","toFixed","username","bidTime"],"sources":["/Users/stefanosgiorkas/Downloads/ect_auctions/frontend/src/components/AuctionDetails.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./Register.css\"; // reuse styling\n\nconst AuctionDetails = () => {\n  const { id } = useParams();\n  const [auction, setAuction] = useState(null);\n  const [bidAmount, setBidAmount] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [bids, setBids] = useState([]);\n\n  const fetchAuction = async () => {\n    try {\n      const res = await axios.get(\"http://localhost:8080/api/auctions\");\n      const found = res.data.find(item => item.id.toString() === id);\n      setAuction(found);\n    } catch {\n      setMessage(\"Failed to load auction\");\n    }\n  };\n\n  const fetchBids = async () => {\n    try {\n      const res = await axios.get(`http://localhost:8080/api/bids/auction/${id}`);\n      setBids(res.data);\n    } catch {\n      setBids([]);\n    }\n  };\n\n  useEffect(() => {\n    fetchAuction();\n    fetchBids();\n  }, [id]);\n\n  const handleBid = async (e) => {\n    e.preventDefault();\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    const payload = {\n      amount: parseFloat(bidAmount),\n      auction: { id: auction.id },\n      bidder: { id: user.id }\n    };\n\n    try {\n      await axios.post(\"http://localhost:8080/api/bids\", payload);\n      setMessage(\"‚úÖ Bid placed successfully!\");\n      setBidAmount(\"\");\n      fetchAuction(); // update price\n      fetchBids();    // update bid list\n    } catch (err) {\n      setMessage(\"‚ùå \" + (err.response?.data || \"Failed to submit bid\"));\n    }\n  };\n\n  if (!auction) return <p>Loading auction...</p>;\n\n  return (\n    <div className=\"register-container\">\n      <h2>{auction.name}</h2>\n      <p><strong>Description:</strong> {auction.description}</p>\n      <p><strong>Category:</strong> {auction.category}</p>\n      <p><strong>Current Price:</strong> ${auction.currentPrice}</p>\n      <p><strong>Ends:</strong> {new Date(auction.endTime).toLocaleString()}</p>\n\n      <form onSubmit={handleBid}>\n        <input\n          type=\"number\"\n          placeholder=\"Your bid\"\n          value={bidAmount}\n          onChange={(e) => setBidAmount(e.target.value)}\n          required\n          step=\"0.01\"\n          min={auction.currentPrice + 0.01}\n        />\n        <button type=\"submit\">Submit Bid</button>\n      </form>\n\n      {message && <p>{message}</p>}\n\n      {bids.length > 0 && (\n        <div style={{ marginTop: \"20px\" }}>\n          <h3>Bid History</h3>\n          <ul>\n            {bids.map((bid) => (\n              <li key={bid.id}>\n                üí∞ ${bid.amount.toFixed(2)} ‚Äì <strong>{bid.bidder.username}</strong><br />\n                üïí {new Date(bid.bidTime).toLocaleString()}\n              </li>\n                       \n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AuctionDetails;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}